---
title: Route Rules
description: Nuxt Kit provides a set of utilities to help you work with route rules at build time.
links:
  - label: Source
    icon: i-simple-icons-github
    to: https://github.com/nuxt/nuxt/blob/main/packages/kit/src/route-rules.ts
    size: xs
---

Nuxt is powered by the [Nitro](https://nitro.build/) server engine. With Nitro, you can incorporate high-level logic directly into your configuration, which is useful for actions like redirects, proxying, caching, and appending headers to routes. This configuration works by associating route patterns with specific route settings.

::tip
You can read more about Nitro route rules in the [Nitro documentation](https://nitro.build/guide/routing#route-rules).
::

## `extendRouteRules`

Extends route rules at build time. Supports both single route and batch updates.

::tip{icon="i-lucide-video" to="https://vueschool.io/lessons/adding-route-rules-and-route-middlewares?friend=nuxt" target="_blank"}
Watch Vue School video about adding route rules and route middlewares.
::

### Usage

```ts twoslash
import { createResolver, defineNuxtModule, extendPages, extendRouteRules } from '@nuxt/kit'

export default defineNuxtModule({
  async setup (options) {
    const { resolve } = createResolver(import.meta.url)

    extendPages((pages) => {
      pages.unshift({
        name: 'preview-new',
        path: '/preview-new',
        file: resolve('runtime/preview.vue'),
      })
    })

    // Single route
    await extendRouteRules('/preview', {
      redirect: {
        to: '/preview-new',
        statusCode: 302,
      },
    })

    // Multiple routes at once
    await extendRouteRules({
      '/api/**': { cors: true },
      '/cached/**': { cache: { maxAge: 60 * 60 } },
    })
  },
})
```

### Dynamic Route Rules

The function returns a handle with `remove()` and `replace()` methods for managing rules dynamically. This is useful for HMR or when rules need to be updated at runtime:

```ts twoslash
import { defineNuxtModule, extendRouteRules } from '@nuxt/kit'
import type { RouteRulesHandle } from '@nuxt/kit'

export default defineNuxtModule({
  async setup (options, nuxt) {
    const handle = await extendRouteRules({
      '/api/**': { cors: true },
    })

    // Later, replace rules atomically (single rebuild)
    await handle.update({
      '/api/**': { cors: false },
      '/new/**': { cache: { maxAge: 60 } },
    })

    // Or remove all rules from this handle
    await handle.remove()
  },
})
```

### Type

```ts
interface RouteRulesHandle {
  remove: () => Promise<void>
  replace: (rules: Record<string, NitroRouteConfig>) => Promise<void>
}

function extendRouteRules (route: string, rule: NitroRouteConfig, options?: ExtendRouteRulesOptions): Promise<RouteRulesHandle>
function extendRouteRules (rules: Record<string, NitroRouteConfig>, options?: ExtendRouteRulesOptions): Promise<RouteRulesHandle>
```

### Parameters

**route**: A route pattern to match against.\
**rule**: A route rule configuration to apply to the matched route.\
**rules**: An object mapping route patterns to their rule configurations.

::tip
About route rules configurations, you can get more detail in [Hybrid Rendering > Route Rules](/docs/guide/concepts/rendering#route-rules).
::

**options**: Options to control merge behavior.

| Name       | Type      | Default | Description                                                                                                  |
| ---------- | --------- | ------- | ------------------------------------------------------------------------------------------------------------ |
| `order`    | `number`  | `0`     | Priority order for rule merging. Higher values take precedence. `100` is used by inline `defineRouteRules`. |
| `override` | `boolean` | `false` | **Deprecated.** Use `order` instead. When true, sets `order` to `10`.                                        |

### Return Value

Returns a `RouteRulesHandle` with two methods:
- `remove()` - Removes all rules added by this handle. Safe to call multiple times (idempotent).
- `replace(rules)` - Atomically replaces all rules with new ones in a single rebuild. Useful for HMR updates.

## `getRouteRules`

Get merged route rules for a specific path. Uses radix3 matcher to find all matching rules and merges them with `defu`. The matcher is cached on the Nuxt instance and always reads fresh rules.

### Usage

```ts twoslash
import { defineNuxtModule, getRouteRules } from '@nuxt/kit'

export default defineNuxtModule({
  setup (options, nuxt) {
    nuxt.hook('ready', () => {
      const apiRules = getRouteRules('/api/users')
      console.log('API rules:', apiRules)
    })
  },
})
```

### Type

```ts
function getRouteRules (path: string): NitroRouteRules
```
