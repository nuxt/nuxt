<!DOCTYPE html>
<html>

<head>
  <!-- SW_INIT-->
  <meta charset="utf-8">
  <link rel="prefetch" href="/nuxt.sw.js">
  <script>
    if (location.host !== 'localhost' && location.protocol === 'http:') {
      return location.replace(location.href.replace('http://', 'https://'))
    }

    async function reload() {
      const html = await fetch(window.location.href).then(r => r.text())
      if (html.includes('<!-- SW_INIT-->')) {
        window.location.reload(false)
      } else {
        document.open()
        document.write(html)
        document.close()
      }
    }

    async function register() {
      const registration = await navigator.serviceWorker.register('/nuxt.sw.js')
      await navigator.serviceWorker.ready
      registration.active.addEventListener('statechange', (event) => {
        if (event.target.state === 'activated') {
          reload()
        }
      })
    }

    register()
  </script>
</head>

<body>
  Loading...
</body>

</html>
