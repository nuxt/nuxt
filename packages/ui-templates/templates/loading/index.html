<!DOCTYPE html>
<html>
  <head>
    <title>{{ messages.loading }} | {{ messages.appName }}</title>
    <meta charset="utf-8" />
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0" name="viewport" />
    <script type="module" src="/styles.ts"></script>
    <style>
      .nuxt-loader-bar {
        background: #00DC82;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: 3px;
      }
      .triangle-loading {
        position: absolute;
      }
      .triangle-loading>path {
        fill: none;
        stroke-width: 4px;
        stroke-linecap: round;
        stroke-linejoin: round;
        /* Stroke-dasharray property */
        stroke-dasharray: 128;
        stroke-dashoffset: 128;
        animation: nuxt-loading-move 3s linear infinite;
      }
      .nuxt-logo:hover .triangle-loading>path {
        animation-play-state: paused;
      }
      @keyframes nuxt-loading-move {
        100% {
          stroke-dashoffset: -128;
        }
      }
      @media (prefers-color-scheme: dark) {
        html, body {
          color: white;
          color-scheme: dark;
        }
      }
      @media (prefers-reduced-motion: reduce) {
        #snow-canvas {
          display: none !important;
        }
      }
    </style>
  </head>
  <body class="font-sans antialiased relative overflow-hidden min-h-screen bg-white dark:bg-[#020420] text-[#020420] dark:text-white flex flex-col justify-center items-center text-center">
    <a href="https://nuxt.com/?utm_source=nuxt-loading-screen" target="_blank" rel="noopener" class="nuxt-logo group flex items-end gap-4" id="nuxtImg">
      <div class="relative">
        <svg class="triangle-loading text-[#00DC82]/80 group-hover:text-[#00DC82]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 37 25" fill="none" width="80">
          <path stroke="currentColor" d="M24.236 22.006h10.742L25.563 5.822l-8.979 14.31a4 4 0 0 1-3.388 1.874H2.978l11.631-20 5.897 10.567" />
        </svg>
        <svg class="dark:text-gray-200 dark:group-hover:text-white text-[#020420]/80 group-hover:text-[#020420]" xmlns="http://www.w3.org/2000/svg" width="214" height="53" fill="none" viewBox="0 0 800 200">
          <path fill="currentColor" d="M377 200a4 4 0 0 0 4-4v-93s5.244 8.286 15 25l38.707 66.961c1.789 3.119 5.084 5.039 8.649 5.039H470V50h-27a4 4 0 0 0-4 4v94l-17-30-36.588-62.98c-1.792-3.108-5.081-5.02-8.639-5.02H350v150h27ZM676.203 143.857 710.551 92h-25.73a9.972 9.972 0 0 0-8.333 4.522L660.757 120.5l-15.731-23.978A9.972 9.972 0 0 0 636.693 92h-25.527l34.348 51.643L608.524 200h24.966a9.969 9.969 0 0 0 8.29-4.458l19.18-28.756 18.981 28.72a9.968 9.968 0 0 0 8.313 4.494h24.736l-36.787-56.143ZM724.598 92h19.714V60.071h28.251V92H800v24.857h-27.437V159.5c0 10.5 5.284 15.429 14.43 15.429H800V200h-16.869c-23.576 0-38.819-14.143-38.819-39.214v-43.929h-19.714V92ZM590 92h-15c-3.489 0-6.218.145-8.5 2.523-2.282 2.246-2.5 3.63-2.5 7.066v52.486c0 8.058-.376 12.962-4 16.925-3.624 3.831-8.619 5-16 5-7.247 0-12.376-1.169-16-5-3.624-3.963-4-8.867-4-16.925v-52.486c0-3.435-.218-4.82-2.5-7.066C519.218 92.145 516.489 92 513 92h-15v62.422c0 14.004 3.892 25.101 11.676 33.292C517.594 195.905 529.103 200 544 200c14.897 0 26.204-4.095 34.123-12.286 7.918-8.191 11.877-19.288 11.877-33.292V92Z" />
        </svg>
      </div>
      <span class="inline-block font-mono leading-none text-[#00DC82] group-hover:border-[#00DC42] text-[16px] font-semibold border-[#00DC42]/50 bg-[#00DC42]/10 group-hover:bg-[#00DC42]/15 px-2.5 py-1.5 border rounded">{{ version }}</span>
    </a>
    <div class="nuxt-loader-bar"></div>
    <script>
      if (typeof window.fetch === 'undefined') {
        setTimeout(() => window.location.reload(), 200)
      } else {
        const check = async () => {
          try {
            const body = await window
              .fetch(window.location.href)
              .then(r => r.text())
            if (!body.includes('__NUXT_LOADING__')) {
              return window
                .location
                .reload()
            }
          } catch {}
          setTimeout(check, 200)
        }
        check()
      }
    </script>
    <script>
      // Snow effect with localStorage toggle
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches
      function whatHemisphere() {
        let y = new Date()
        if (y.getTimezoneOffset == undefined) return null
        y = y.getFullYear()
        let jan = -(new Date(y, 0, 1, 0, 0, 0, 0).getTimezoneOffset())
        let jul = -(new Date(y, 6, 1, 0, 0, 0, 0).getTimezoneOffset())
        let diff = jan - jul
        return diff < 0 ? 'N' : diff > 0 ? 'S' : null
      }
      // Only run in November, December, and January (N hemisphere) or May, June, and July (S hemisphere)
      const months = { N: [10, 11, 0], S: [4, 5, 6] }
      const hemisphere = whatHemisphere()
      if (hemisphere && months[hemisphere].includes(new Date().getMonth()) && !prefersReducedMotion) {
        let snowEnabled = localStorage.getItem('nuxt-snow') !== 'false'
        let animationId = null, particles = [], lastCall = Date.now()
        const density = 0.00025, gravity = 1.25
        const wind = { current: 0, maxCurrent: 4, force: 0.1, target: 0.1, min: 0.1, max: 0.4, easing: 0.01 }
        const mod = (a, b) => ((a % b) + b) % b

        // Create toggle button and canvas
        const $btn = document.createElement('button')
        $btn.id = 'snow-toggle'
        $btn.style = 'position:fixed;bottom:16px;right:16px;z-index:100;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:8px;padding:8px 12px;cursor:pointer;font-size:20px;'
        document.body.appendChild($btn)

        const $canvas = document.createElement('canvas')
        $canvas.id = 'snow-canvas'
        $canvas.style = 'position:fixed;inset:0;z-index:-10;pointer-events:none;opacity:0;transition:opacity 0.5s;filter:blur(4px);'
        document.body.appendChild($canvas)
        const ctx = $canvas.getContext('2d')

        // Resize and initialize particles
        function resize() {
          $canvas.width = window.innerWidth
          $canvas.height = window.innerHeight
          particles = Array.from({ length: Math.floor($canvas.width * $canvas.height * density) }, () => ({
            x: Math.random() * $canvas.width, y: Math.random() * $canvas.height,
            vx: 1 + Math.random(), vy: 1 + Math.random(), vsin: Math.random() * 10,
            rangle: Math.random() * 2 * Math.PI, rsin: Math.random() * 10,
            color: `rgba(255,255,255,${0.1 + Math.random() * 0.15})`,
            size: 5 * Math.random() * 4 * ($canvas.height / 1000)
          }))
        }

        // Draw particles
        function draw() {
          ctx.clearRect(0, 0, $canvas.width, $canvas.height)
          const now = Date.now(), delta = now - lastCall
          lastCall = now
          wind.force += (wind.target - wind.force) * wind.easing
          wind.current = Math.max(-wind.maxCurrent, Math.min(wind.current + wind.force * delta * 0.05, wind.maxCurrent))
          if (Math.random() > 0.995) wind.target = (wind.min + Math.random() * (wind.max - wind.min)) * (Math.random() > 0.5 ? -1 : 1)
          const uTime = delta * 0.2
          particles.forEach(p => {
            p.x = mod(p.x + uTime + wind.current * p.vx, $canvas.width)
            p.y = mod(p.y + uTime * p.vy * gravity, $canvas.height)
            p.x += Math.sin(uTime * p.vsin) * p.rsin * 0.5
            p.rangle += uTime * 0.01
            ctx.fillStyle = p.color
            ctx.beginPath()
            ctx.ellipse(p.x, p.y, p.size, p.size * 0.66, p.rangle, 0, Math.PI * 2)
            ctx.fill()
          })
          animationId = requestAnimationFrame(draw)
        }

        // Update snow effect and handle toggle (resize)
        function update() {
          $btn.innerHTML = snowEnabled ? '☀️' : '❄️'
          $btn.title = snowEnabled ? 'Disable snow' : 'Enable snow'
          if (snowEnabled) { resize(); window.addEventListener('resize', resize); $canvas.style.opacity = 1; lastCall = Date.now(); draw() }
          else { if (animationId) cancelAnimationFrame(animationId); animationId = null; window.removeEventListener('resize', resize); $canvas.style.opacity = 0 }
        }

        $btn.onclick = () => { snowEnabled = !snowEnabled; localStorage.setItem('nuxt-snow', snowEnabled); update() }
        update()
      }
    </script>
  </body>
</html>
